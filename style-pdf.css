/**
 * ============================================================================
 * CSS OPTIMISÉ POUR GÉNÉRATION PDF - ATS-SAFE
 * ============================================================================
 * 
 * Ce CSS ajuste uniquement les espacements et la densité pour le PDF.
 * Les styles visuels (polices, couleurs, backgrounds, arrondis) sont
 * conservés depuis style.css pour un rendu identique.
 * 
 * Stratégie ATS-safe:
 * - Garder TOUS les styles visuels (polices, couleurs, neonbox, etc.)
 * - Réduire uniquement les espacements pour optimiser la place
 * - Gérer les page breaks
 * - Cacher les boutons UI
 * - Afficher le lien CV en ligne
 * - Désactiver les symboles décoratifs ::before
 */

/* ============================================================================
  OPTIMISATIONS GLOBALES - Espacements uniquement
  ============================================================================ */

html.pdf-mode,
html.pdf-mode body {
  line-height: 1.5 !important;
  height: auto !important;
  min-height: 0 !important;
  overflow: visible !important;
  background-image: none !important;
  /* Avoid applying backgrounds on html/body — use @page for PDF page backgrounds */
  background-color: transparent !important;
  background: transparent !important;
}

/* PDF page background: use @page to avoid stacking/selection issues caused
   by backgrounds on html/body. Default to the light theme color here. */
/* Page background driven by a CSS variable so we can support light/dark PDFs.
   `html.pdf-mode[data-theme=light]` and `html.pdf-mode[data-theme=dark]`
   set `--pdf-page-bg` below. */
@page {
  size: A4;
  margin: 10mm;
  background: var(--pdf-page-bg, #e3ebf4);
}

/* Default PDF theme variables */
html.pdf-mode[data-theme="light"] {
  --pdf-page-bg: #e3ebf4;
}

html.pdf-mode[data-theme="dark"] {
  --pdf-page-bg: #121620;
}

/* If your PDF generation pipeline can't propagate CSS variables into @page
   for the dark variant, consider generating the dark PDF using a different
   HTML class (e.g. `pdf-dark`) or a separate stylesheet. */

/* Neutralize backgrounds only for full-bleed sections that cause selection overlays
   (experiences-section uses negative margins to extend to page edges). Keep
   regular `.section`/`.neonbox` backgrounds so contact and other boxes remain. */
html.pdf-mode .experiences-section .neonbox,
html.pdf-mode .experiences-section .section {
  background: transparent !important;
  border: none !important;
}

/* Restore contact box background for PDF but simplify to a solid color to
   avoid selection artifacts from semi-transparent layered backgrounds. */
html.pdf-mode .contact-section .neonbox {
  background: var(--contact-bg, #007bff) !important;
  color: var(--contrast-high, #fff) !important;
}

/* Restore a safe full-bleed background for experiences using a pseudo-element.
   This places the background visually edge-to-edge while keeping it behind
   text (z-index) and non-interactive (pointer-events:none) so selection
   remains contiguous. */
html.pdf-mode .experiences-section .neonbox {
  position: relative !important;
  overflow: visible !important;
  border-radius: 0 !important;
}

html.pdf-mode .experiences-section .neonbox::before {
  content: "" !important;
  position: absolute !important;
  /* Extend beyond the container and page margin (@page margin: 10mm) to
     ensure a true full-bleed visual within the PDF. */
  left: -10mm !important;
  right: -10mm !important;
  top: 0 !important;
  bottom: 0 !important;
  background: var(--glass-bg, #ffffff) !important;
  z-index: 0 !important;
  pointer-events: none !important;
}

/* Ensure content sits above the pseudo-element so selection highlights text
   rather than the background element. */
html.pdf-mode .experiences-section .neonbox > * {
  position: relative !important;
  z-index: 1 !important;
}

html.pdf-mode .container {
  display: block !important;
  gap: 0 !important;
  padding: 1rem !important;
  max-width: 100% !important;
}

/* ============================================================================
   SIMPLIFICATION VISUELLE - Pas d'effets complexes
   ============================================================================ */

html.pdf-mode * {
  box-shadow: none !important;
  text-shadow: none !important;
  filter: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  transition: none !important;
}

/* Ensure text is selectable in exported PDFs and small remains inline */
html.pdf-mode,
html.pdf-mode * {
  -webkit-user-select: text !important;
  user-select: text !important;
}

html.pdf-mode small {
  display: inline !important;
  font-size: 0.95em !important;
}

html.pdf-mode .section,
html.pdf-mode .neonbox {
  box-shadow: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* Supprimer les layouts flex pour le PDF */
html.pdf-mode .header-content,
html.pdf-mode .top-right-buttons,
html.pdf-mode .contact-section ul,
html.pdf-mode .profile-section,
html.pdf-mode .skills-section,
html.pdf-mode .experiences-section,
html.pdf-mode .formation-section,
html.pdf-mode .languages-section,
html.pdf-mode .interests-section {
  display: block !important;
}

/* ============================================================================
   HEADER - Espacements réduits
   ============================================================================ */

html.pdf-mode .header-section {
  margin-bottom: 2.5rem !important;
}

html.pdf-mode .header-section h1 {
  font-size: 2rem !important;
  margin-bottom: 0.5rem !important;
}

html.pdf-mode .tagline {
  font-size: 0.9rem !important;
  margin-top: 0.3rem !important;
}

/* ============================================================================
   SECTIONS - Espacements compacts
   ============================================================================ */

html.pdf-mode .section {
  padding: 0.8rem !important;
  margin-bottom: 0.5rem !important;
}

/* Experiences section with full-bleed background (edge to edge) */
html.pdf-mode .experiences-section .section,
html.pdf-mode .experiences-section .neonbox {
  border-radius: 0 !important;
  /* Extend background to page edges with negative margins */
  margin-left: -1rem !important;
  margin-right: -1rem !important;
  /* Add padding back to keep content readable */
  padding-left: 1rem !important;
  padding-right: 1rem !important;
  padding-top: 0.8rem !important;
  padding-bottom: 0.8rem !important;
}

html.pdf-mode .section h2 {
  font-size: 1.1rem !important;
  margin-bottom: 0.6rem !important;
}

/* Profil - espacement titre/contenu harmonisé */
html.pdf-mode .profile-section h2 {
  margin-bottom: 0.6rem !important;
}

html.pdf-mode .profile-section p {
  margin-top: 0 !important;
}

html.pdf-mode .section h3 {
  font-size: 1rem !important;
  margin-bottom: 0.4rem !important;
}

html.pdf-mode .section p {
  line-height: 1.5 !important;
  margin-bottom: 0.5rem !important;
}

html.pdf-mode .section ul {
  margin: 0.5rem 0 !important;
  padding-left: 1.2rem !important;
  list-style-type: none !important;
}

html.pdf-mode .section li {
  margin-bottom: 0.4rem !important;
  line-height: 1.5 !important;
}

html.pdf-mode .section li:last-child {
  margin-bottom: 0 !important;
}

html.pdf-mode .section li::before {
  content: "- " !important;
  margin-left: -1.2rem !important;
  padding-right: 0.5rem !important;
  /* Keep marker inline to preserve natural text selection order */
  display: inline !important;
}

/* ============================================================================
   EXPERIENCE ITEMS - Compact spacing
   ============================================================================ */

html.pdf-mode .experience-item {
  margin-bottom: 1rem !important;
  padding-bottom: 0.8rem !important;
}

html.pdf-mode .experience-item:last-child {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

html.pdf-mode .experience-item h3 {
  margin-bottom: 0.1rem !important;
}

html.pdf-mode .experience-item p,
html.pdf-mode .experience-item li {
  margin: 0.05rem 0 !important;
  font-size: 0.95rem !important;
  font-style: normal !important;
  color: var(--muted) !important;
}

html.pdf-mode .skills-section li,
html.pdf-mode .interests-section li {
  color: var(--muted) !important;
}

html.pdf-mode .experience-item strong,
html.pdf-mode .skills-section li strong,
html.pdf-mode .interests-section li strong {
  color: var(--text) !important;
}

html.pdf-mode .experience-item ul {
  margin-top: 0.1rem !important;
  margin-bottom: 0.1rem !important;
}

html.pdf-mode .experience-item li {
  margin-bottom: 0.1rem !important;
  font-size: 0.95rem !important;
  color: var(--muted) !important;
}

/* Sub-experience styling for PDF */
html.pdf-mode .experience-item h4 {
  margin-left: 0.4rem !important;
  margin-top: 0.6rem !important;
  margin-bottom: 0.05rem !important;
  font-size: 0.95rem !important;
}

html.pdf-mode .sub-experience {
  margin-left: 0.8rem !important;
  margin-top: 0.1rem !important;
  margin-bottom: 0.1rem !important;
}

html.pdf-mode .sub-header {
  display: block !important;
  margin-bottom: 0.05rem !important;
}

html.pdf-mode .sub-header h3,
html.pdf-mode .sub-header h5,
html.pdf-mode .sub-header .sector,
html.pdf-mode .sub-header .stack,
html.pdf-mode .sub-header a {
  display: inline !important;
}

html.pdf-mode .sub-header .sector::before,
html.pdf-mode .sub-header .stack::before,
html.pdf-mode .sub-header a::before {
  content: " - " !important;
  color: var(--muted) !important;
  display: inline !important;
}

html.pdf-mode .sub-header a {
  font-size: 0.8rem !important;
}

html.pdf-mode .sub-experience h5 {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  font-size: 0.95rem !important;
  font-weight: 600 !important;
}

html.pdf-mode .sub-header .sector,
html.pdf-mode .sub-header .stack {
  font-size: 0.85rem !important;
  color: var(--muted) !important;
}

html.pdf-mode .sub-header .sector {
  font-style: normal !important;
}

html.pdf-mode .sub-header .stack {
  font-style: italic !important;
}

/* ============================================================================
   UI ELEMENTS - Masquer pour PDF
   ============================================================================ */

html.pdf-mode .top-right-buttons,
html.pdf-mode #toggle,
html.pdf-mode #lang-button,
html.pdf-mode #print-btn,
html.pdf-mode .lang-dropdown {
  display: none !important;
}

/* ============================================================================
   CONTACT SECTION - Afficher lien CV en PDF
   ============================================================================ */

/* Afficher le lien CV en ligne dans le PDF */
html.pdf-mode [data-contact-cv] {
  display: list-item !important;
}

/* ============================================================================
   PAGE BREAKS - Contrôle pagination
   ============================================================================ */

html.pdf-mode .section {
  page-break-inside: auto !important;
  break-inside: auto !important;
}

html.pdf-mode li {
  page-break-inside: auto !important;
  break-inside: auto !important;
}

html.pdf-mode .neonbox {
  page-break-inside: auto !important;
  break-inside: auto !important;
  overflow: visible !important;
}

html.pdf-mode h1,
html.pdf-mode h2,
html.pdf-mode h3,
html.pdf-mode h4,
html.pdf-mode h5,
html.pdf-mode h6 {
  break-after: auto !important;
  page-break-after: auto !important;
}

html.pdf-mode .experiences-section {
  page-break-before: auto !important;
}

/* ============================================================================
   PRINT COLOR ADJUSTMENT - Forcer l'impression des couleurs
   ============================================================================ */

html.pdf-mode * {
  -webkit-print-color-adjust: exact !important;
  print-color-adjust: exact !important;
  color-adjust: exact !important;
}

/* ============================================================================
   DECORATIVE SYMBOLS (PDF) - Désactivés pour ATS-safe
   ============================================================================ */

html.pdf-mode h2::before {
  content: "" !important;
  display: none !important;
}

/* ============================================================================
  PAGE BREAK UTILITIES
  ============================================================================ */

/* Forcer un saut de page (PDF uniquement) */
html.pdf-mode .pdf-page-break {
  break-before: page !important;
  page-break-before: always !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  border: 0 !important;
}

/* Espace minimum en haut des pages après un saut */
html.pdf-mode .pdf-page-break + section .section {
  margin-top: 3rem !important;
}

/* Optionnel: séparateur visuel si besoin en HTML (masqué en PDF) */
html.pdf-mode .pdf-page-separator {
  display: none !important;
}

/* ============================================================================
  FORMATION SECTION - Add top margin
  ============================================================================ */
html.pdf-mode .formation-section {
  margin-top: 2rem !important;
}

html.pdf-mode .formation-section .section {
  margin-top: 0 !important;
}

/* ============================================================================
  MANUAL PAGE BREAK - For specific content breaks
  ============================================================================ */
html.pdf-mode .pdf-page-break-after {
  display: inline !important;
  page-break-after: always !important;
  break-after: page !important;
}

/* Hide the page break marker on web */
.pdf-page-break-after {
  display: none;
}

/* ============================================================================
  FORCED PAGE BREAK BEFORE FREELANCE EXPERIENCE
  ============================================================================ */
html.pdf-mode .experience-page-break {
  page-break-before: always !important;
  break-before: page !important;
  margin-top: 3rem !important;
}
